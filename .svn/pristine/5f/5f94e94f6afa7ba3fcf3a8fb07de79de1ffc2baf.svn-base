package fr.eurecom.mobserv.arianna.model;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.provider.BaseColumns;

/**
 * @author dani
 *
 */
public class NavigationLink extends Model implements BaseColumns{
	public static final String TABLE_NAME = "navigation_link";
	public static final String COLUMN_NAME_FROM_NODE = "from_node";
    public static final String COLUMN_NAME_TO_NODE = "to_node";
    public static final String COLUMN_NAME_MAP_LEVEL = "map_level";
    private static final String SQL_CREATE_TABLE =
    	    "CREATE TABLE " + NavigationLink.TABLE_NAME + " (" +
    	    Path._ID + Model.PRIMARY_KEY + Model.COMMA_SEP +
    	    Model.COLUMN_NAME_URI + Model.TEXT_TYPE + Model.COMMA_SEP +
    	    NavigationLink.COLUMN_NAME_FROM_NODE + Model.TEXT_TYPE + Model.COMMA_SEP +
    	    NavigationLink.COLUMN_NAME_TO_NODE + Model.TEXT_TYPE  + Model.COMMA_SEP +
    	    NavigationLink.COLUMN_NAME_MAP_LEVEL + Model.TEXT_TYPE  + Model.COMMA_SEP +
    	    ")";
    
    private String toNode;
    private String fromNode;
    private String mapLevel;
    
    
	/**
	 * NavigationLink between 2 nodes
	 * @param context
     * @param uri
	 * @param toNode
	 * @param fromNode
	 * @param mapLevel
	 */
	public NavigationLink(Context context, String uri, String toNode, String fromNode, String mapLevel) {
		super(context,uri);
		this.toNode = toNode;
		this.fromNode = fromNode;
		this.mapLevel = mapLevel;
	}
	/**
	 * @return the toNode
	 */
	public String getToNode() {
		return toNode;
	}
	/**
	 * @param toNode the toNode to set
	 */
	public void setToNode(String toNode) {
		this.toNode = toNode;
	}
	/**
	 * @return the fromNode
	 */
	public String getFromNode() {
		return fromNode;
	}
	/**
	 * @param fromNode the fromNode to set
	 */
	public void setFromNode(String fromNode) {
		this.fromNode = fromNode;
	}
	/**
	 * @return the mapLevel
	 */
	public String getMapLevel() {
		return mapLevel;
	}
	/**
	 * @param mapLevel the mapLevel to set
	 */
	public void setMapLevel(String mapLevel) {
		this.mapLevel = mapLevel;
	}
	
	@Override
	public boolean save() {
		// Gets the data repository in write mode
		SQLiteDatabase db = DbHelper.getInstance(this.getContext()).getWritableDatabase();
	
		// Create a new map of values, where column names are the keys
		ContentValues values = new ContentValues();
		values.put(Model.COLUMN_NAME_URI,this.getUri());
		values.put(NavigationLink.COLUMN_NAME_FROM_NODE,this.getFromNode());
		values.put(NavigationLink.COLUMN_NAME_TO_NODE,this.getToNode());
		values.put(NavigationLink.COLUMN_NAME_MAP_LEVEL,this.getMapLevel());
		
		// Insert the new row, returning the primary key value of the new row
		long newRowId;
		newRowId = db.insert(
		         NavigationLink.TABLE_NAME,
		         null,
		         values);
		return newRowId>=0;
	}
	
	@Override
	protected String getTableName() {
		return TABLE_NAME;
	}
    
}
